<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../mdb-radio-list/mdb-radio-list.html">
<link rel="import" href="../paper-radio-button/paper-radio-button.html">
<link rel="import" href="../mdb-title/mdb-title.html">
<link rel="import" href="../mdb-search-box/mdb-search-box.html">
<link rel="import" href="./mdb-concept-recommendation.html">

<!--
`mdb-recommended-concepts`


### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--mdb-recommended-concepts-title` | Mixin applied to recommended concepts title | `{}`

@demo demo/index.html 
-->

<dom-module id="mdb-recommended-concepts">
  <template>
    <style>
       :host {
        display: block;
      }

       :host mdb-title {
        padding-top: 10px;
        padding-bottom: 10px;
        padding-left: 20px;
        border-bottom: 1px solid #f1f5f7;
        height: 50px;
        @apply(--mdb-recommended-concepts-title);
      }

       :host mdb-concept-recommendation {
        border-bottom: 1px solid #f1f5f7;
      }

       :host #recommendation-list {
        background-color: #fcfdff;
        border-top: 1px solid #f1f5f7;
        border-left: 1px solid #f1f5f7;
        border-right: 1px solid #f1f5f7;
      }

       :host #search-box {
        margin-top: var(--standard-padding, 20px);
      }

       :host .no-recommended-concepts {
        background-color: #fcfdff;
        height: 100px;
        border: 1px solid #e1e6ed;
        position: relative;
        margin-top: var(--standard-padding, 20px);
      }

       :host .no-recommended-concepts p {
        font-size: 1em;
        font-weight: 400;
        margin: 0;
        text-align: center;
        padding: var(--standard-padding, 20px)
      }
    </style>
    <template is="dom-if" if="[[recommendations.length]]">
      <div id="recommendation-list">
        <mdb-title help-text="Recommended Concepts" level="2">Recommended Concepts</mdb-title>
        <template is="dom-repeat" items="[[recommendations]]">
          <mdb-concept-recommendation property="[[item.property]]" recommendation-factor="{{item.recommendationFactor}}" recommended="{{item.recommended}}"></mdb-concept-recommendation>
        </template>
      </div>
    </template>
    <template is="dom-if" if="[[!recommendations.length]]">
      <div class="no-recommended-concepts">
        <p>Sorry, we couldn't find any recommended concepts. If you're looking for something particular, please try searching
          below.
        </p>
      </div>
    </template>
    <div id="search-box">
      <mdb-search-box placeholder="Search for more concepts"></mdb-search-box>
    </div>
  </template>

  <script>
    Polymer({

      is: 'mdb-recommended-concepts',

      properties: {
        name: {
          type: String,
          value: 'mdb-recommended-concepts',
        },

        recommendations: {
          type: Array,
          value: [],
          observer: '_recommendationsChanged'
        }
      },

      _recommendationsChanged: function () {
        var that = this;
        var listItems = this.querySelectorAll('mdb-concept-recommendation');
        var recommendations = this.recommendations;

        if (listItems && listItems.length && recommendations && recommendations.length) {
          Array.prototype.forEach.call(listItems, function (e) {
            var recommendation = recommendations.find(function (i) { return i.property === e.property; });
            if (recommendation) {
              e.recommendationFactor = recommendation.recommendationFactor;
              e.recommended = recommendation.recommended;
            }
          });
        }
      }

    });
  </script>
</dom-module>